# TIL 220422GCD1-2

## 🔥학습 내용

### **sync와 async의 차이는 무엇인가요?**
- sync: 작업이 끝날때까지 기다리는 것
	- 계좌입출금
- async: 기다리지 않고 다음 작업을 실행하는 것
	- 시험날의 학생과 선생

### **async와 concurrent는 구분되는 개념이라고 했습니다. 각각을 설명해보세요.**
- async: 스레드 개수가 중요한게 아니라 작업만 봤을 때 기다리지 않는 것
- concurrent: 여러개의 작업을 여러개의 다른 스레드로 작업을 배치시키는 것

### **DispatchQueue에서 serial 큐와 main 큐는 같은 것인가요?**
- main이 디폴트가 serial queue 인 부분 말고는 다르다
- 커스텀 queue를 만드는 경우 main thread가 아닌 새로운 thread를 생성
- 특히 main은 일반적인 Serial 큐와는 달리 앱이 실행되는 동안에는 늘 메모리에 올라와 있으며 또 전역적으로 사용 가능한 큐라는 특수한 성질이 있습니다

### **DispatchQueue에서 `main`과 `global()`의 차이는 무엇인가요?**
- main
    - 앱이 실행되는 동안에 늘 메모리에 올라와 있고 전역적으로 사용할 수 있는 기본 스레드
    - Serial Queue
- global
    - 메모리에 올라왔다가, 작업이 끝나고 나면 메모리에서 제거
    - Concurrent Queue → 여러개의 스레드
    - main thread에서 파생된 스레드

생각할점 - 스레드가 주도적으로 뭘 할 수 있는지, 스레드가 일을 하도록 시키는게 무엇인지
스레드는 자기가 주도적으로 할 수 있는건 없음. ios에선 개발자가 GCD를 통해 코드로 제어
sleep → 스레드에 직접적으로 제어 하는 함수 중 하나 잘 못 사용하면 위험(제대로 이해하고 사용해야함)
휴먼에러를 방지하기 위해 GCD가 나옴

### **main 스레드는 어떤 특징을 가지고 있나요?**
- 앱이 실행되는 동안에 늘 메모리에 올라와 있고 전역적으로 사용할 수 있는 기본 스레드
- global 스레드들과는 다르게 Run Loop가 자동으로 설정되고 실행됩니다. 메인 스레드에서 동작하는 Run Loop를 Main Run Loop라고 합니다..
- UI 작업은 메인 스레드에서만 작업할 수 있습니다.

### **Serial에서 async는 어떻게 동작하나요?**
- async로 동작하지만 단일 스레드이기 때문에 결국엔 각각의 작업이 쌓인 순서대로 처리된다.

### **serial 큐에서 sync로 작업을 처리하면 어떻게 될까요?**
- 각각의 작업이 끝나는 것을 기다리고 끝나면 다음 작업을 처리한다.

### **main.sync를 사용하면 어떻게 되나요? 그 이유는 무엇인가요?**
- main Queue의 작업을 동기적으로 수행하면 deadlock에 빠지게 됨
- 작업이 끝나기를 기다리는 sync의 특성때문에 발생
- Main 스레드는 sync의 코드블럭이 수행되기를 기다려야 하는데, 이 때 sync 코드 블럭 역시 멈춰버리는 것
- queue를 block하고 sync의 코드블럭의 task가 끝날때까지 기다림. 하지만 queue는 이미 block 상태가 되었기 때문에 코드블럭의 task는 시작조차 할 수 없음.
- main thread는 UI 이벤트 처리를 계속해서 수행해야 되는데 main.sync를 호출하게 되면 main 스레드는 sync의 코드 블럭이 수행되기를 기다려야 된다. sync는 코드 블럭이 처리되기 전까지 다음 스텝으로 넘어가지 않기 때문에 deadlock이 난다
- Custom Serial Queue에서는 가능
- 계속해서 앱의 이벤트 처리를 해야하는 main thread가 sync 호출에 의해 멈추게 되면 안되니까 main queue에서만 안되지 않을까?

### **병렬 프로그래밍과 동시성 프로그래밍은 각각 무엇인가요? 서로 반대되는 개념일까요?**
- 동시성(소프트웨어적) 
	- 여러개의 스레드를 이용하여 동시에 여러 작업을 처리
	- 다른 작업(task)을 각각의 다른 스레드로 나눠서 번갈아 가면서 진행
	- 실제로는 동시에 처리하는 것이 아닌 여러가지 작업을 나열해두고 하나씩 번갈아가면서 작업을 처리하는 것이지만,  아주 빠르게 Context Switching을 하기 때문에 동시에 처리하는것으로 보여짐

- 병렬성(하드웨어적)
	- CPU(코어)가 여러 개 있을 때 가능
	- 실제로 물리적으로 동시에 작업을 처리
	- 여러 개의 코어가 하나의 작업을 분담해서 처리
	- 많은 연산이 필요한 그래픽 처리나 머신 러닝에서는 적극적으로 사용

---

> - 참고
>   - [야곰닷넷 동시성 프로그래밍](https://yagom.net/courses/동시성-프로그래밍-concurrency-programming/lessons/동시성-프로그래밍/topic/코어와-스레드/)
